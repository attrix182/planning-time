<p-toast position="top-center" class="p-toast"></p-toast>


<section class="participation-section" *ngIf="!loading">
  <section class="actions-box card" *ngIf="!loading && event.active">
    <button *ngIf="!showResults" pButton pRipple class="p-button-raised p-button-primary" (click)="presentResults()">
      Mostrar resultados
      <i class="ml-2 pi pi-eye"></i>
    </button>

    <button *ngIf="showResults" pButton pRipple class="p-button-raised p-button-primary" (click)="hideResults()">
      Ocultar resultados
      <i class="ml-2 pi pi-eye-slash"></i>
    </button>

    <button [disabled]="results.length == 0" pButton pRipple class="p-button-raised p-button-primary" (click)="restart()">Reiniciar
      <i class="ml-2 pi pi-refresh"></i>
    </button>
  </section>

  <section class="users-box" *ngIf="!loading && activeUsers">
    <div *ngFor="let user of activeUsers" class="card" [ngClass]="user.answer ? 'answer' : ''">
      {{ user.name }}
    </div>
  </section>

  <div class="card-center" *ngIf="!loading && event.active">
    <div class="title text-dark p-4">Â¡Elije una carta!</div>
    <section *ngIf="showResults" class="text-center">
      <div *ngFor="let res of results">{{ res.user }} voto: {{ res.vote }}</div>
      <div class="promedio" *ngIf="promedio">Promedio: {{ promedio.toFixed(2) }}</div>
    </section>
  </div>

  <section class="options-box card" *ngIf="!loading && event.active">
    <div
      *ngFor="let opt of options"
      class="card"
      [ngClass]="optionSelected == opt ? 'active' : ''"
      (click)="selectOption(opt)"
    >
      {{ opt }}
    </div>
  </section>

  <div *ngIf="!loading && !event.active">
    <div class="card">
      <div class="title">Equipo: {{ event.team }}</div>
      <div class="subtitle">Evento: {{ event.eventTitle }}</div>
      <h1>Esta sesion ya no esta activa</h1>
      <button pButton class="mt-4 mb-2 p-button-raised p-button-primmary" routerLink="/">Volver al Home</button>
    </div>
  </div>
</section>

<p-toast position="top-center" class="p-toast"></p-toast>
